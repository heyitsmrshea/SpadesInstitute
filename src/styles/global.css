@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    /* Design tokens as CSS custom properties */
    --color-accent: #1e3a5f;
    --color-accent-hover: #0f2a4a;
    --color-focus: rgba(30, 58, 95, 0.4);
    --section-padding: 4rem;
    --section-padding-md: 5rem;
  }

  html {
    scroll-behavior: smooth;
    font-size: 16px;
  }

  body {
    font-family: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Inter, sans-serif;
    background-color: #fbfbf7;
    color: #111827;
    margin: 0;
    font-size: 1rem;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Headings - serif for H1/H2 only, sans for rest */
  h1, h2 {
    font-family: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;
    font-style: italic;
    color: inherit;
    letter-spacing: -0.01em;
  }

  h3, h4, h5, h6 {
    font-family: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Inter, sans-serif;
    font-weight: 600;
    color: inherit;
  }

  /* Improved link accessibility */
  a {
    color: inherit;
    text-decoration-skip-ink: auto;
  }

  a:not(.btn):not(.nav-link) {
    text-decoration: underline;
    text-decoration-color: rgba(30, 58, 95, 0.3);
    text-underline-offset: 2px;
    transition: text-decoration-color 0.2s ease;
  }

  a:not(.btn):not(.nav-link):hover {
    text-decoration-color: var(--color-accent);
  }

  /* Selection highlight */
  ::selection {
    background: rgba(30, 58, 95, 0.15);
    color: inherit;
  }

  /* Focus visible for accessibility */
  :focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }
}

@layer components {
  /* ============================================
     BUTTON SYSTEM
     Primary: Filled accent color (main action)
     Secondary: Outline accent color (alternative action)
     Tertiary: Text link style (minor action)
     ============================================ */

  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-lg px-6 py-3 
           text-sm font-semibold tracking-wide
           transition-all duration-200 ease-out
           focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    text-transform: none;
    letter-spacing: 0.02em;
  }

  /* Primary - Main action, high emphasis */
  .btn-primary {
    @apply bg-spades-accent text-white shadow-card
           hover:bg-spades-accent-hover hover:shadow-card-hover hover:-translate-y-0.5
           focus-visible:ring-spades-accent;
  }

  /* Secondary - Alternative action, medium emphasis */
  .btn-secondary {
    @apply border-2 border-spades-accent text-spades-accent bg-transparent
           hover:bg-spades-accent hover:text-white hover:-translate-y-0.5
           focus-visible:ring-spades-accent;
  }

  /* Tertiary - Minor action, low emphasis */
  .btn-tertiary {
    @apply text-spades-accent underline underline-offset-4 decoration-spades-accent/30
           hover:decoration-spades-accent px-0 py-0
           focus-visible:ring-spades-accent;
  }

  /* Outline variant (alternative to secondary) */
  .btn-outline {
    @apply border border-spades-ink/20 text-spades-ink bg-transparent
           hover:border-spades-ink hover:bg-spades-ink/5 hover:-translate-y-0.5
           focus-visible:ring-spades-ink;
  }

  /* Inverted for dark backgrounds */
  .btn-invert {
    @apply bg-white text-spades-ink shadow-card
           hover:bg-white/90 hover:shadow-card-hover hover:-translate-y-0.5
           focus-visible:ring-white;
  }

  .btn-invert-outline {
    @apply border-2 border-white/60 text-white bg-transparent
           hover:border-white hover:bg-white/10 hover:-translate-y-0.5
           focus-visible:ring-white;
  }

  /* Ghost button */
  .btn-ghost {
    @apply text-spades-muted hover:text-spades-ink px-3 py-2
           focus-visible:ring-spades-ink;
  }

  /* ============================================
     CARD COMPONENTS
     ============================================ */

  .card {
    @apply bg-white border border-spades-border rounded-xl p-6 
           shadow-card transition-all duration-200;
  }

  .card-hover {
    @apply hover:shadow-card-hover hover:-translate-y-1;
  }

  .card-dark {
    @apply bg-white/5 border-white/10 text-white;
  }

  /* ============================================
     SECTION LAYOUT
     ============================================ */

  .section-padding {
    @apply py-16 md:py-20;
  }

  .section-padding-sm {
    @apply py-12 md:py-16;
  }

  .section-padding-lg {
    @apply py-20 md:py-28;
  }

  /* Content width for optimal reading */
  .prose-width {
    @apply max-w-prose mx-auto;
  }

  /* ============================================
     TEXT UTILITIES
     ============================================ */

  .text-body {
    @apply text-base leading-relaxed text-spades-text-secondary;
  }

  .text-body-lg {
    @apply text-lg leading-relaxed text-spades-text-secondary;
  }

  /* Dark section text with better contrast */
  .text-dark-primary {
    @apply text-white;
  }

  .text-dark-secondary {
    @apply text-white/85;
  }

  .text-dark-muted {
    @apply text-white/70;
  }
}

@layer utilities {
  .flag-real {
    filter: saturate(1.05) contrast(1.05);
    box-shadow: 0 12px 26px rgba(15, 23, 42, 0.2);
    transform: perspective(800px) rotateX(4deg);
  }

  .clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .hover-lift {
    @apply transition-all duration-200 hover:-translate-y-1 hover:shadow-card-hover;
  }

  .hover-glow {
    @apply transition-shadow duration-200 hover:shadow-[0_0_30px_rgba(30,58,95,0.15)];
  }

  /* Focus utilities */
  .focus-accent {
    @apply focus-visible:ring-2 focus-visible:ring-spades-accent focus-visible:ring-offset-2;
  }

  .focus-white {
    @apply focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-spades-ink;
  }
}

/* Smooth transitions for all interactive elements */
article, a, button {
  transition-property: transform, box-shadow, opacity, background-color, border-color, color;
  transition-duration: 200ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
