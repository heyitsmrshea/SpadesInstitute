---
import Layout from '../components/Layout.astro';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const siteUrl = import.meta.env.PUBLIC_SITE_URL || 'https://www.spadesinstitute.org';

// Event Details - Update these for your specific events
const events = [
  {
    id: 'dinner',
    name: 'Mission Brief: Dinner',
    tagline: 'An evening of trusted conversation',
    date: 'Monday, April 28, 2025',
    time: '6:30 PM - 9:30 PM PT',
    location: 'San Francisco, CA',
    locationDetail: 'Venue details shared upon confirmation',
    description: 'Join fellow operators, innovators, and government leaders for an intimate dinner conversation on the intersection of cybersecurity and national security.',
    calendarStart: '20250428T183000',
    calendarEnd: '20250428T213000',
  },
  {
    id: 'breakfast',
    name: 'Mission Brief: Breakfast',
    tagline: 'Start the day with purpose',
    date: 'Tuesday, April 29, 2025',
    time: '7:30 AM - 9:00 AM PT',
    location: 'San Francisco, CA',
    locationDetail: 'Venue details shared upon confirmation',
    description: 'A working breakfast bringing together senior leaders to discuss emerging threats, opportunities, and collaborative solutions.',
    calendarStart: '20250429T073000',
    calendarEnd: '20250429T090000',
  }
];

// Countdown calculation
const eventDate = new Date('2025-04-28T18:30:00-07:00');
const now = new Date();
const diffTime = eventDate.getTime() - now.getTime();
const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

// Generate Google Calendar URLs
function getGoogleCalendarUrl(event: typeof events[0]) {
  const title = encodeURIComponent(`Spades Institute: ${event.name}`);
  const details = encodeURIComponent(`${event.description}\n\nHosted by Spades Institute at RSA Conference 2025`);
  const location = encodeURIComponent(`${event.location}`);
  return `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${event.calendarStart}/${event.calendarEnd}&details=${details}&location=${location}&ctz=America/Los_Angeles`;
}

// Generate ICS content
function getICSContent(event: typeof events[0]) {
  return `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Spades Institute//RSA Events//EN
BEGIN:VEVENT
DTSTART;TZID=America/Los_Angeles:${event.calendarStart}
DTEND;TZID=America/Los_Angeles:${event.calendarEnd}
SUMMARY:Spades Institute: ${event.name}
DESCRIPTION:${event.description}\\n\\nHosted by Spades Institute at RSA Conference 2025
LOCATION:${event.location}
END:VEVENT
END:VCALENDAR`;
}
---

<Layout
  title="RSA Conference 2025 | Spades Institute - Design 1"
  description="Join Spades Institute at RSA Conference 2025 for exclusive dinner and breakfast events bringing together government, industry, and academia leaders."
>
  <head slot="head">
    <link rel="canonical" href={`${siteUrl}${base}/rsa1`} />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  </head>

  <style>
    /* ===== FIGHTER JET / VETERAN COMMAND CENTER THEME ===== */
    
    /* Custom Fonts */
    .font-stencil {
      font-family: 'Black Ops One', 'Impact', sans-serif;
      letter-spacing: 0.02em;
    }
    
    .font-mono-tech {
      font-family: 'Share Tech Mono', 'Monaco', 'Consolas', monospace;
    }

    /* Main Background - Night Vision / Cockpit Display */
    .command-center {
      background: linear-gradient(180deg, #020508 0%, #0a1628 30%, #091420 70%, #020508 100%);
      position: relative;
    }

    /* Animated Grid Overlay */
    .command-center::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(34, 211, 180, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(34, 211, 180, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      animation: gridPulse 8s ease-in-out infinite;
    }

    @keyframes gridPulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    /* CRT Scanline Effect - Reduced opacity for better readability */
    .crt-lines::after {
      content: '';
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.08) 2px,
        rgba(0, 0, 0, 0.08) 4px
      );
      pointer-events: none;
      opacity: 0.15;
    }

    /* Radar Sweep Animation - Reduced intensity */
    .radar-container {
      position: absolute;
      width: 600px;
      height: 600px;
      opacity: 0.08;
    }

    .radar-sweep {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 1px solid rgba(34, 211, 180, 0.3);
    }

    .radar-sweep::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50%;
      height: 2px;
      background: linear-gradient(90deg, rgba(34, 211, 180, 0.8), transparent);
      transform-origin: left center;
      animation: radarSpin 4s linear infinite;
    }

    .radar-sweep::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50%;
      height: 50%;
      background: conic-gradient(from 0deg, transparent, rgba(34, 211, 180, 0.2) 30deg, transparent 60deg);
      transform-origin: left top;
      animation: radarSpin 4s linear infinite;
    }

    @keyframes radarSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Radar Rings */
    .radar-ring {
      position: absolute;
      border-radius: 50%;
      border: 1px solid rgba(34, 211, 180, 0.15);
    }

    /* Fighter Jet Silhouettes */
    .jet-silhouette {
      position: absolute;
      opacity: 0.06;
      pointer-events: none;
    }

    .jet-1 {
      top: 15%;
      right: 5%;
      width: 200px;
      animation: jetFly1 25s linear infinite;
    }

    .jet-2 {
      bottom: 20%;
      left: 3%;
      width: 150px;
      animation: jetFly2 30s linear infinite;
      animation-delay: -10s;
    }

    @keyframes jetFly1 {
      0% { transform: translateX(0) translateY(0) rotate(-8deg); opacity: 0.06; }
      50% { transform: translateX(-100px) translateY(50px) rotate(-5deg); opacity: 0.08; }
      100% { transform: translateX(0) translateY(0) rotate(-8deg); opacity: 0.06; }
    }

    @keyframes jetFly2 {
      0% { transform: translateX(0) translateY(0) rotate(12deg) scaleX(-1); opacity: 0.05; }
      50% { transform: translateX(80px) translateY(-30px) rotate(10deg) scaleX(-1); opacity: 0.07; }
      100% { transform: translateX(0) translateY(0) rotate(12deg) scaleX(-1); opacity: 0.05; }
    }

    /* HUD Corner Brackets */
    .hud-bracket {
      position: absolute;
      width: 80px;
      height: 80px;
      pointer-events: none;
    }

    .hud-bracket::before,
    .hud-bracket::after {
      content: '';
      position: absolute;
      background: linear-gradient(90deg, rgba(34, 211, 180, 0.6), transparent);
    }

    .hud-bracket.top-left::before {
      top: 0; left: 0; width: 40px; height: 2px;
    }
    .hud-bracket.top-left::after {
      top: 0; left: 0; width: 2px; height: 40px;
      background: linear-gradient(180deg, rgba(34, 211, 180, 0.6), transparent);
    }

    .hud-bracket.top-right::before {
      top: 0; right: 0; width: 40px; height: 2px;
      background: linear-gradient(-90deg, rgba(34, 211, 180, 0.6), transparent);
    }
    .hud-bracket.top-right::after {
      top: 0; right: 0; width: 2px; height: 40px;
      background: linear-gradient(180deg, rgba(34, 211, 180, 0.6), transparent);
    }

    .hud-bracket.bottom-left::before {
      bottom: 0; left: 0; width: 40px; height: 2px;
    }
    .hud-bracket.bottom-left::after {
      bottom: 0; left: 0; width: 2px; height: 40px;
      background: linear-gradient(0deg, rgba(34, 211, 180, 0.6), transparent);
    }

    .hud-bracket.bottom-right::before {
      bottom: 0; right: 0; width: 40px; height: 2px;
      background: linear-gradient(-90deg, rgba(34, 211, 180, 0.6), transparent);
    }
    .hud-bracket.bottom-right::after {
      bottom: 0; right: 0; width: 2px; height: 40px;
      background: linear-gradient(0deg, rgba(34, 211, 180, 0.6), transparent);
    }

    /* Targeting Reticle */
    .targeting-reticle {
      position: absolute;
      width: 120px;
      height: 120px;
      opacity: 0.15;
      animation: reticlePulse 3s ease-in-out infinite;
    }

    .targeting-reticle::before {
      content: '';
      position: absolute;
      inset: 20px;
      border: 1px solid rgba(34, 211, 180, 0.6);
      border-radius: 50%;
    }

    .targeting-reticle::after {
      content: '+';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
      color: rgba(34, 211, 180, 0.4);
      font-weight: 100;
    }

    @keyframes reticlePulse {
      0%, 100% { opacity: 0.15; transform: scale(1); }
      50% { opacity: 0.25; transform: scale(1.05); }
    }

    /* Telemetry Data Strip */
    .telemetry-bar {
      position: absolute;
      display: flex;
      gap: 3rem;
      font-family: 'Share Tech Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.1em;
      color: rgba(34, 211, 180, 0.5);
      text-transform: uppercase;
    }

    .telemetry-bar.top {
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    .telemetry-bar.bottom {
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    .telemetry-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .telemetry-label {
      color: rgba(255, 255, 255, 0.3);
    }

    .telemetry-value {
      color: rgba(34, 211, 180, 0.7);
    }

    /* Hero Title Glow */
    .hero-glow {
      text-shadow: 
        0 0 20px rgba(34, 211, 180, 0.4),
        0 0 40px rgba(34, 211, 180, 0.2),
        0 0 60px rgba(34, 211, 180, 0.1);
      animation: textGlow 4s ease-in-out infinite alternate;
    }

    @keyframes textGlow {
      from { text-shadow: 0 0 20px rgba(34, 211, 180, 0.4), 0 0 40px rgba(34, 211, 180, 0.2); }
      to { text-shadow: 0 0 30px rgba(34, 211, 180, 0.6), 0 0 60px rgba(34, 211, 180, 0.3); }
    }

    /* Status Indicator with LED Effect */
    .status-led {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
    }

    .status-led::before {
      content: '';
      width: 10px;
      height: 10px;
      background: #22d3b4;
      border-radius: 50%;
      box-shadow: 0 0 10px #22d3b4, 0 0 20px rgba(34, 211, 180, 0.5);
      animation: ledPulse 2s ease-in-out infinite;
    }

    @keyframes ledPulse {
      0%, 100% { box-shadow: 0 0 10px #22d3b4, 0 0 20px rgba(34, 211, 180, 0.5); }
      50% { box-shadow: 0 0 15px #22d3b4, 0 0 30px rgba(34, 211, 180, 0.7), 0 0 40px rgba(34, 211, 180, 0.3); }
    }

    /* Mission Card - Glassmorphism Cockpit Panel */
    .mission-panel {
      background: rgba(10, 22, 40, 0.7);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(34, 211, 180, 0.15);
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .mission-panel::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(34, 211, 180, 0.05) 0%, transparent 50%);
      pointer-events: none;
    }

    /* Notched Corners */
    .mission-panel::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 0 30px 30px 0;
      border-color: transparent #091420 transparent transparent;
    }

    .mission-panel:hover {
      border-color: rgba(34, 211, 180, 0.4);
      box-shadow: 
        0 0 40px rgba(34, 211, 180, 0.1),
        inset 0 0 60px rgba(34, 211, 180, 0.02);
      transform: translateY(-4px);
    }

    /* Panel Header Strip */
    .panel-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 30px;
      height: 4px;
      background: linear-gradient(90deg, #22d3b4, rgba(34, 211, 180, 0.2));
    }

    /* Mission Number Badge */
    .mission-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.75rem;
      background: rgba(251, 191, 36, 0.15);
      border: 1px solid rgba(251, 191, 36, 0.4);
      border-radius: 2px;
      font-family: 'Share Tech Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.15em;
      color: #fbbf24;
      text-transform: uppercase;
    }

    /* Amber Warning Glow */
    .glow-amber {
      text-shadow: 0 0 10px rgba(251, 191, 36, 0.5), 0 0 20px rgba(251, 191, 36, 0.2);
    }

    /* Icon Container with Ring */
    .icon-ring {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: 2px solid rgba(34, 211, 180, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      background: rgba(34, 211, 180, 0.05);
    }

    .icon-ring::after {
      content: '';
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      border: 1px dashed rgba(34, 211, 180, 0.2);
      animation: iconSpin 20s linear infinite;
    }

    @keyframes iconSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Data Row */
    .data-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid rgba(34, 211, 180, 0.05);
    }

    .data-row:last-child {
      border-bottom: none;
    }

    .data-icon {
      width: 20px;
      height: 20px;
      color: rgba(34, 211, 180, 0.6);
    }

    .data-label {
      font-family: 'Share Tech Mono', monospace;
      font-size: 13px;
      color: #e2e8f0;
      letter-spacing: 0.02em;
    }

    /* Tactical Buttons */
    .btn-tactical {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.625rem 1.25rem;
      background: rgba(34, 211, 180, 0.08);
      border: 1px solid rgba(34, 211, 180, 0.3);
      border-radius: 4px;
      font-family: 'Share Tech Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #22d3b4;
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-tactical::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(34, 211, 180, 0.1), transparent);
      transition: left 0.5s ease;
    }

    .btn-tactical:hover {
      background: rgba(34, 211, 180, 0.15);
      border-color: #22d3b4;
      box-shadow: 0 0 20px rgba(34, 211, 180, 0.2);
    }

    .btn-tactical:hover::before {
      left: 100%;
    }

    /* Primary Button - "Armed" Style */
    .btn-primary-armed {
      background: linear-gradient(135deg, #22d3b4, #14b89e);
      border: 2px solid #22d3b4;
      color: #0a1628;
      font-weight: 600;
      padding: 0.875rem 2rem;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
    }

    .btn-primary-armed::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .btn-primary-armed:hover {
      box-shadow: 
        0 0 30px rgba(34, 211, 180, 0.5),
        0 0 60px rgba(34, 211, 180, 0.3);
      transform: translateY(-2px);
    }

    .btn-primary-armed:hover::before {
      transform: translateX(100%);
    }

    /* Form Inputs - Terminal Style */
    .input-terminal {
      width: 100%;
      padding: 0.875rem 1rem;
      background: rgba(10, 22, 40, 0.6);
      border: 1px solid rgba(34, 211, 180, 0.2);
      border-radius: 4px;
      font-family: 'Share Tech Mono', monospace;
      font-size: 14px;
      color: #e2e8f0;
      transition: all 0.3s ease;
    }

    .input-terminal:focus {
      outline: none;
      border-color: #22d3b4;
      box-shadow: 0 0 0 3px rgba(34, 211, 180, 0.1), 0 0 20px rgba(34, 211, 180, 0.1);
      background: rgba(10, 22, 40, 0.8);
    }

    .input-terminal::placeholder {
      color: rgba(148, 163, 184, 0.5);
      font-style: italic;
    }

    /* Checkbox - Toggle Switch Style */
    .checkbox-military {
      appearance: none;
      width: 22px;
      height: 22px;
      border: 2px solid rgba(34, 211, 180, 0.4);
      border-radius: 3px;
      background: rgba(10, 22, 40, 0.6);
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      flex-shrink: 0;
    }

    .checkbox-military:checked {
      background: #22d3b4;
      border-color: #22d3b4;
    }

    .checkbox-military:checked::after {
      content: '';
      position: absolute;
      left: 7px;
      top: 3px;
      width: 5px;
      height: 10px;
      border: solid #0a1628;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }

    .checkbox-military:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(34, 211, 180, 0.2);
    }

    /* Section Divider with Flight Path */
    .flight-path-divider {
      position: relative;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flight-path-divider::before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(34, 211, 180, 0.3), transparent);
    }

    .flight-path-divider::after {
      content: '▼';
      color: rgba(34, 211, 180, 0.4);
      font-size: 12px;
      background: #091420;
      padding: 0 1rem;
      animation: chevronBounce 2s ease-in-out infinite;
    }

    @keyframes chevronBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }

    /* Confidential Watermark */
    .confidential-mark {
      position: absolute;
      font-family: 'Share Tech Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.3em;
      color: rgba(34, 211, 180, 0.08);
      text-transform: uppercase;
      transform: rotate(-90deg);
      white-space: nowrap;
    }

    .confidential-mark.left {
      left: 20px;
      top: 50%;
      transform-origin: left center;
      transform: rotate(-90deg) translateX(-50%);
    }

    .confidential-mark.right {
      right: 20px;
      top: 50%;
      transform-origin: right center;
      transform: rotate(90deg) translateX(50%);
    }

    /* Footer - End of Briefing */
    .briefing-footer {
      background: linear-gradient(180deg, transparent, rgba(10, 22, 40, 0.5));
      border-top: 1px solid rgba(34, 211, 180, 0.1);
    }

    .end-marker {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      font-family: 'Share Tech Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.2em;
      color: rgba(34, 211, 180, 0.4);
      text-transform: uppercase;
    }

    .end-marker::before,
    .end-marker::after {
      content: '';
      width: 60px;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(34, 211, 180, 0.3));
    }

    .end-marker::after {
      background: linear-gradient(-90deg, transparent, rgba(34, 211, 180, 0.3));
    }

    /* Form Container */
    .form-panel {
      background: rgba(10, 22, 40, 0.7);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(34, 211, 180, 0.15);
      position: relative;
    }

    .form-panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #22d3b4, #fbbf24, #22d3b4);
    }

    /* Success/Error States */
    .alert-success {
      background: rgba(34, 211, 180, 0.1);
      border: 1px solid rgba(34, 211, 180, 0.3);
      border-radius: 4px;
      padding: 1rem;
    }

    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 4px;
      padding: 1rem;
    }

    /* Entry Animations */
    .reveal-up {
      opacity: 0;
      transform: translateY(30px);
      animation: revealUp 0.8s ease-out forwards;
    }

    .reveal-up-delay-1 { animation-delay: 0.1s; }
    .reveal-up-delay-2 { animation-delay: 0.2s; }
    .reveal-up-delay-3 { animation-delay: 0.3s; }
    .reveal-up-delay-4 { animation-delay: 0.4s; }

    @keyframes revealUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Label styling */
    .form-label {
      display: block;
      font-family: 'Share Tech Mono', monospace;
      font-size: 12px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #94a3b8;
      margin-bottom: 0.5rem;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .telemetry-bar {
        display: none;
      }

      .jet-silhouette {
        display: none;
      }

      .confidential-mark {
        display: none;
      }

      .radar-container {
        width: 300px;
        height: 300px;
      }

      .hero-mini-form {
        display: none;
      }

      .trust-badges {
        flex-wrap: wrap;
        justify-content: center;
      }
    }

    /* Spades Logo */
    .spades-logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .spades-logo-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #22d3b4, #14b89e);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 0 20px rgba(34, 211, 180, 0.3);
    }

    .spades-logo-text {
      font-family: 'Share Tech Mono', monospace;
      font-size: 14px;
      letter-spacing: 0.2em;
      color: #22d3b4;
      text-transform: uppercase;
    }

    /* Countdown Timer */
    .countdown-container {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin: 1.5rem 0;
    }

    .countdown-item {
      text-align: center;
      padding: 0.75rem 1rem;
      background: rgba(34, 211, 180, 0.1);
      border: 1px solid rgba(34, 211, 180, 0.3);
      border-radius: 8px;
      min-width: 70px;
    }

    .countdown-value {
      font-family: 'Black Ops One', sans-serif;
      font-size: 1.75rem;
      color: #22d3b4;
      line-height: 1;
    }

    .countdown-label {
      font-family: 'Share Tech Mono', monospace;
      font-size: 10px;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-top: 0.25rem;
    }

    /* Social Proof */
    .social-proof {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 1.5rem 0;
      padding: 1rem;
      background: rgba(34, 211, 180, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(34, 211, 180, 0.1);
    }

    .social-proof-avatars {
      display: flex;
    }

    .social-proof-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1e3a5f, #0f172a);
      border: 2px solid rgba(34, 211, 180, 0.5);
      margin-left: -8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #22d3b4;
    }

    .social-proof-avatar:first-child {
      margin-left: 0;
    }

    .social-proof-text {
      font-family: 'Share Tech Mono', monospace;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.7);
    }

    .social-proof-text strong {
      color: #22d3b4;
    }

    /* Trust Badges */
    .trust-badges {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(34, 211, 180, 0.1);
    }

    .trust-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-family: 'Share Tech Mono', monospace;
      font-size: 11px;
      color: rgba(255, 255, 255, 0.4);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .trust-badge-icon {
      width: 20px;
      height: 20px;
      color: rgba(34, 211, 180, 0.6);
    }

    /* Hero Mini Form */
    .hero-mini-form {
      background: rgba(10, 22, 40, 0.8);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(34, 211, 180, 0.2);
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: 2rem;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-mini-form-title {
      font-family: 'Share Tech Mono', monospace;
      font-size: 12px;
      color: #fbbf24;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 1rem;
      text-align: center;
    }

    .hero-mini-form-row {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .hero-mini-form-row .input-terminal {
      flex: 1;
      padding: 0.75rem;
      font-size: 13px;
    }

    .hero-mini-form-submit {
      width: 100%;
      padding: 0.875rem;
      background: linear-gradient(135deg, #22d3b4, #14b89e);
      border: none;
      border-radius: 6px;
      color: #0a1628;
      font-family: 'Share Tech Mono', monospace;
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .hero-mini-form-submit:hover {
      box-shadow: 0 0 30px rgba(34, 211, 180, 0.5);
      transform: translateY(-2px);
    }

    /* Skip to signup link */
    .skip-to-signup {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      font-family: 'Share Tech Mono', monospace;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.4);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .skip-to-signup:hover {
      color: #22d3b4;
    }
  </style>

  <!-- Hero Section -->
  <section class="command-center crt-lines min-h-[70vh] flex items-center justify-center relative overflow-hidden">
    <!-- Radar Animation -->
    <div class="radar-container" style="top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <div class="radar-sweep"></div>
      <div class="radar-ring" style="inset: 20%; border-width: 1px;"></div>
      <div class="radar-ring" style="inset: 35%; border-width: 1px;"></div>
      <div class="radar-ring" style="inset: 50%; border-width: 1px;"></div>
    </div>

    <!-- Fighter Jet Silhouettes -->
    <svg class="jet-silhouette jet-1" viewBox="0 0 100 40" fill="currentColor">
      <path d="M95 20L80 15V18H50L40 12H35L45 18H20L10 15L5 18L15 20L5 22L10 25L20 22H45L35 28H40L50 22H80V25L95 20Z" fill="rgba(34, 211, 180, 0.6)"/>
    </svg>
    <svg class="jet-silhouette jet-2" viewBox="0 0 100 40" fill="currentColor">
      <path d="M95 20L80 15V18H50L40 12H35L45 18H20L10 15L5 18L15 20L5 22L10 25L20 22H45L35 28H40L50 22H80V25L95 20Z" fill="rgba(34, 211, 180, 0.6)"/>
    </svg>

    <!-- Targeting Reticle -->
    <div class="targeting-reticle" style="top: 15%; right: 15%;"></div>
    <div class="targeting-reticle" style="bottom: 20%; left: 10%;"></div>

    <!-- HUD Brackets -->
    <div class="hud-bracket top-left" style="top: 40px; left: 40px;"></div>
    <div class="hud-bracket top-right" style="top: 40px; right: 40px;"></div>
    <div class="hud-bracket bottom-left" style="bottom: 40px; left: 40px;"></div>
    <div class="hud-bracket bottom-right" style="bottom: 40px; right: 40px;"></div>

    <!-- Telemetry Data Strips - Real Event Stats -->
    <div class="telemetry-bar top">
      <div class="telemetry-item">
        <span class="telemetry-label">LOCATION:</span>
        <span class="telemetry-value">San Francisco, CA</span>
      </div>
      <div class="telemetry-item">
        <span class="telemetry-label">ATTENDEES:</span>
        <span class="telemetry-value">75+ Leaders</span>
      </div>
      <div class="telemetry-item">
        <span class="telemetry-label">EVENTS:</span>
        <span class="telemetry-value">2 Sessions</span>
      </div>
    </div>

    <!-- Confidential Watermarks -->
    <span class="confidential-mark left">Spades Institute // Confidential</span>
    <span class="confidential-mark right">RSA Conference 2025</span>

    <!-- Hero Content -->
    <div class="max-w-4xl mx-auto px-6 py-24 text-center relative z-10">
      <!-- Spades Institute Logo -->
      <div class="spades-logo justify-center reveal-up">
        <div class="spades-logo-icon">
          <span>♠</span>
        </div>
        <span class="spades-logo-text">Spades Institute</span>
      </div>

      <div class="mb-6 reveal-up">
        <span class="status-led font-mono-tech text-xs uppercase tracking-[0.3em] text-emerald-400">
          RSA Conference 2025 // San Francisco, CA
        </span>
      </div>

      <h1 class="font-stencil text-5xl md:text-6xl lg:text-7xl text-white mb-6 hero-glow reveal-up reveal-up-delay-1">
        MISSION BRIEF
      </h1>

      <!-- Countdown Timer -->
      <div class="countdown-container reveal-up reveal-up-delay-1" id="countdown">
        <div class="countdown-item">
          <div class="countdown-value" id="countdown-days">{diffDays}</div>
          <div class="countdown-label">Days</div>
        </div>
        <div class="countdown-item">
          <div class="countdown-value" id="countdown-hours">00</div>
          <div class="countdown-label">Hours</div>
        </div>
        <div class="countdown-item">
          <div class="countdown-value" id="countdown-mins">00</div>
          <div class="countdown-label">Mins</div>
        </div>
      </div>

      <p class="text-lg text-slate-400 max-w-2xl mx-auto leading-relaxed reveal-up reveal-up-delay-2">
        Two invitation-only gatherings for leaders at the intersection of national security, technology, and innovation.
      </p>

      <!-- Social Proof -->
      <div class="social-proof reveal-up reveal-up-delay-2">
        <div class="social-proof-avatars">
          <div class="social-proof-avatar">DoD</div>
          <div class="social-proof-avatar">NSA</div>
          <div class="social-proof-avatar">CIA</div>
          <div class="social-proof-avatar">+</div>
        </div>
        <span class="social-proof-text">Join <strong>75+ leaders</strong> from government & industry</span>
      </div>

      <!-- Hero Mini Form -->
      <div class="hero-mini-form reveal-up reveal-up-delay-3">
        <div class="hero-mini-form-title">Quick Access Request</div>
        <form id="heroMiniForm">
          <div class="hero-mini-form-row">
            <input type="text" name="name" placeholder="Name" required class="input-terminal" />
            <input type="email" name="email" placeholder="Email" required class="input-terminal" />
          </div>
          <div class="hero-mini-form-row">
            <input type="text" name="company" placeholder="Organization" required class="input-terminal" style="flex: 1;" />
          </div>
          <button type="submit" class="hero-mini-form-submit">
            Request Access Now
          </button>
        </form>
        <a href="#signup" class="skip-to-signup">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
          Or view full details below
        </a>
      </div>

      <!-- Trust Badges -->
      <div class="trust-badges reveal-up reveal-up-delay-4">
        <div class="trust-badge">
          <svg class="trust-badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          Secure & Private
        </div>
        <div class="trust-badge">
          <svg class="trust-badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          </svg>
          San Francisco, CA
        </div>
        <div class="trust-badge">
          <svg class="trust-badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
          Invite Only
        </div>
      </div>
    </div>

    <!-- Bottom Telemetry -->
    <div class="telemetry-bar bottom">
      <div class="telemetry-item">
        <span class="telemetry-label">STATUS:</span>
        <span class="telemetry-value" style="color: #22d3b4;">ACTIVE</span>
      </div>
      <div class="telemetry-item">
        <span class="telemetry-label">OP WINDOW:</span>
        <span class="telemetry-value">APR 28-29 2025</span>
      </div>
      <div class="telemetry-item">
        <span class="telemetry-label">CLEARANCE:</span>
        <span class="telemetry-value" style="color: #fbbf24;">INVITE ONLY</span>
      </div>
    </div>
  </section>

  <!-- Flight Path Divider -->
  <div class="command-center">
    <div class="flight-path-divider"></div>
  </div>

  <!-- Events Section -->
  <section id="events" class="command-center crt-lines py-20 relative">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-16">
        <p class="font-mono-tech text-xs uppercase tracking-[0.3em] text-emerald-400/60 mb-4">Operations Schedule</p>
        <h2 class="font-stencil text-3xl md:text-4xl text-white hero-glow">
          SELECT YOUR MISSION
        </h2>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        {events.map((event, index) => (
          <div class="mission-panel rounded-xl p-8">
            <div class="panel-header"></div>
            
            <div class="flex items-start justify-between mb-6 mt-2">
              <div>
                <span class="mission-badge glow-amber">
                  Mission {String(index + 1).padStart(2, '0')}
                </span>
                <h3 class="font-stencil text-2xl text-white mt-3">
                  {event.name}
                </h3>
                <p class="text-emerald-400/70 text-sm mt-1 font-mono-tech">{event.tagline}</p>
              </div>
              <div class="icon-ring">
                {index === 0 ? (
                  <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                  </svg>
                ) : (
                  <svg class="w-6 h-6 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                  </svg>
                )}
              </div>
            </div>

            <div class="space-y-1 mb-6">
              <div class="data-row">
                <svg class="data-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <span class="data-label">{event.date}</span>
              </div>
              <div class="data-row">
                <svg class="data-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span class="data-label">{event.time}</span>
              </div>
              <div class="data-row">
                <svg class="data-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span class="data-label">{event.location}</span>
              </div>
            </div>

            <p class="text-slate-400 text-sm leading-relaxed mb-6">
              {event.description}
            </p>

            <div class="flex flex-wrap gap-3">
              <a
                href={getGoogleCalendarUrl(event)}
                target="_blank"
                rel="noreferrer"
                class="btn-tactical"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                Add to Calendar
              </a>
              <button
                class="btn-tactical download-ics"
                data-event-id={event.id}
                data-ics-content={getICSContent(event)}
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                Download .ICS
              </button>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Flight Path Divider -->
  <div class="command-center">
    <div class="flight-path-divider"></div>
  </div>

  <!-- Signup Form Section -->
  <section id="signup" class="command-center crt-lines py-20 relative">
    <div class="max-w-2xl mx-auto px-6">
      <div class="form-panel rounded-xl p-8 md:p-10">
        <div class="text-center mb-8">
          <p class="font-mono-tech text-xs uppercase tracking-[0.3em] text-amber-400 mb-4 glow-amber">Access Request</p>
          <h2 class="font-stencil text-2xl md:text-3xl text-white hero-glow">
            REQUEST YOUR BRIEFING
          </h2>
          <p class="text-slate-400 mt-4 text-sm">
            Submit your credentials below. Venue details and confirmation will be sent to approved attendees.
          </p>
        </div>

        <!-- Success Message -->
        <div id="form-success" class="hidden mb-6 alert-success">
          <p class="text-emerald-400 font-semibold font-mono-tech text-sm">ACCESS REQUEST TRANSMITTED</p>
          <p class="text-emerald-400/70 text-sm mt-1">Stand by for confirmation. Check your inbox for next steps.</p>
        </div>

        <!-- Error Message -->
        <div id="form-error" class="hidden mb-6 alert-error">
          <p class="text-red-400 font-semibold font-mono-tech text-sm" id="error-message">TRANSMISSION FAILED</p>
        </div>

        <form id="rsaSignupForm" class="space-y-5">
          <div>
            <label for="signup-name" class="form-label">
              Name <span class="text-red-400">*</span>
            </label>
            <input
              id="signup-name"
              name="name"
              type="text"
              required
              placeholder="Your full name"
              class="input-terminal"
            />
          </div>

          <div>
            <label for="signup-company" class="form-label">
              Organization <span class="text-red-400">*</span>
            </label>
            <input
              id="signup-company"
              name="company"
              type="text"
              required
              placeholder="Your company or agency"
              class="input-terminal"
            />
          </div>

          <div>
            <label for="signup-email" class="form-label">
              Email <span class="text-red-400">*</span>
            </label>
            <input
              id="signup-email"
              name="email"
              type="email"
              required
              placeholder="your.email@organization.com"
              class="input-terminal"
            />
          </div>

          <div>
            <label class="form-label">
              Select Mission(s) <span class="text-red-400">*</span>
            </label>
            <div class="space-y-3 mt-3">
              {events.map((event) => (
                <label class="flex items-start gap-3 cursor-pointer group p-3 rounded-lg border border-transparent hover:border-emerald-500/20 hover:bg-emerald-500/5 transition-all">
                  <input
                    type="checkbox"
                    name="events"
                    value={event.id}
                    class="checkbox-military mt-0.5"
                  />
                  <div>
                    <span class="text-slate-200 font-medium group-hover:text-emerald-400 transition-colors">
                      {event.name}
                    </span>
                    <span class="block text-xs text-slate-500 font-mono-tech mt-0.5">{event.date} // {event.time}</span>
                  </div>
                </label>
              ))}
            </div>
          </div>

          <div class="pt-4">
            <button
              type="submit"
              id="submit-btn"
              class="btn-primary-armed w-full font-mono-tech text-sm uppercase tracking-wider inline-flex items-center justify-center gap-2"
            >
              <span id="submit-text">Submit Access Request</span>
              <span id="submit-spinner" class="hidden">
                <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
              </span>
              <svg id="submit-arrow" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </button>
          </div>

          <p class="text-xs text-slate-500 text-center font-mono-tech mt-4">
            Your information is secure. We'll only use it to coordinate event logistics.
          </p>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <section class="command-center briefing-footer py-12">
    <div class="max-w-4xl mx-auto px-6">
      <!-- End of Briefing Marker -->
      <div class="end-marker mb-8">
        <span>End of Briefing</span>
      </div>

      <p class="text-slate-500 text-sm font-mono-tech text-center mb-6">
        Questions? Contact <a href="mailto:info@spadesinstitute.org" class="text-emerald-400 hover:text-emerald-300 transition-colors">info@spadesinstitute.org</a>
      </p>

      <div class="flex items-center justify-center gap-6 text-xs text-slate-600 font-mono-tech uppercase tracking-wider">
        <a href={`${base}/`} class="hover:text-emerald-400 transition-colors">Home</a>
        <span class="text-emerald-500/30">|</span>
        <a href={`${base}/about/`} class="hover:text-emerald-400 transition-colors">About</a>
        <span class="text-emerald-500/30">|</span>
        <a href={`${base}/connect/`} class="hover:text-emerald-400 transition-colors">Connect</a>
      </div>

      <!-- Technical Spec Bar -->
      <div class="mt-8 pt-6 border-t border-emerald-500/10 flex items-center justify-center gap-8 text-[10px] text-slate-600 font-mono-tech uppercase tracking-widest">
        <span>Doc: RSA-2025-001</span>
        <span>Rev: 1.0</span>
        <span>Classification: Invite Only</span>
      </div>
    </div>
  </section>

  <script>
    // Countdown Timer
    function updateCountdown() {
      const eventDate = new Date('2025-04-28T18:30:00-07:00').getTime();
      const now = new Date().getTime();
      const diff = eventDate - now;

      if (diff > 0) {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

        const daysEl = document.getElementById('countdown-days');
        const hoursEl = document.getElementById('countdown-hours');
        const minsEl = document.getElementById('countdown-mins');

        if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
        if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
        if (minsEl) minsEl.textContent = String(mins).padStart(2, '0');
      }
    }

    updateCountdown();
    setInterval(updateCountdown, 60000);

    // Hero Mini Form Handler
    const heroMiniForm = document.getElementById('heroMiniForm');
    if (heroMiniForm) {
      heroMiniForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const data = new FormData(heroMiniForm);
        const submitBtn = heroMiniForm.querySelector('button[type="submit"]');
        if (submitBtn) {
          submitBtn.textContent = 'Transmitting...';
          submitBtn.disabled = true;
        }

        try {
          const response = await fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              access_key: '217a97ca-0557-4364-86f7-66e28fbd499f',
              subject: `RSA 2025 Quick Signup - ${data.get('name')}`,
              from_name: data.get('name'),
              email: data.get('email'),
              message: `Quick signup from hero form:\n\nName: ${data.get('name')}\nEmail: ${data.get('email')}\nOrganization: ${data.get('company')}\n\nEvents: Both (to be confirmed)`,
            }),
          });
          const result = await response.json();
          if (result.success) {
            if (submitBtn) submitBtn.textContent = '✓ Request Sent!';
            heroMiniForm.reset();
            setTimeout(() => {
              if (submitBtn) {
                submitBtn.textContent = 'Request Access Now';
                submitBtn.disabled = false;
              }
            }, 3000);
          }
        } catch (error) {
          if (submitBtn) {
            submitBtn.textContent = 'Error - Try Again';
            submitBtn.disabled = false;
          }
        }
      });
    }

    // ICS Download functionality
    document.querySelectorAll('.download-ics').forEach(button => {
      button.addEventListener('click', () => {
        const icsContent = button.getAttribute('data-ics-content');
        const eventId = button.getAttribute('data-event-id');

        if (icsContent) {
          const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `spades-rsa-${eventId}.ics`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }
      });
    });

    // Form submission
    const form = document.getElementById('rsaSignupForm');
    const submitBtn = document.getElementById('submit-btn');
    const submitText = document.getElementById('submit-text');
    const submitSpinner = document.getElementById('submit-spinner');
    const submitArrow = document.getElementById('submit-arrow');
    const formSuccess = document.getElementById('form-success');
    const formError = document.getElementById('form-error');
    const errorMessage = document.getElementById('error-message');

    if (form) {
      form.addEventListener('submit', async (event) => {
        event.preventDefault();

        // Hide previous messages
        if (formSuccess) formSuccess.classList.add('hidden');
        if (formError) formError.classList.add('hidden');

        // Get form data
        const data = new FormData(form);
        const selectedEvents = data.getAll('events');

        const payload = {
          name: String(data.get('name') || ''),
          company: String(data.get('company') || ''),
          email: String(data.get('email') || ''),
          events: selectedEvents,
        };

        // Validate required fields
        if (!payload.name || !payload.company || !payload.email) {
          if (formError && errorMessage) {
            errorMessage.textContent = 'Please fill in all required fields.';
            formError.classList.remove('hidden');
          }
          return;
        }

        // Validate at least one event selected
        if (selectedEvents.length === 0) {
          if (formError && errorMessage) {
            errorMessage.textContent = 'Please select at least one event.';
            formError.classList.remove('hidden');
          }
          return;
        }

        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(payload.email)) {
          if (formError && errorMessage) {
            errorMessage.textContent = 'Please enter a valid email address.';
            formError.classList.remove('hidden');
          }
          return;
        }

        // Show loading state
        if (submitBtn) submitBtn.disabled = true;
        if (submitText) submitText.textContent = 'Transmitting...';
        if (submitSpinner) submitSpinner.classList.remove('hidden');
        if (submitArrow) submitArrow.classList.add('hidden');

        try {
          // Format event names for the message
          const eventNames = selectedEvents.map(id => {
            if (id === 'dinner') return 'Mission Brief: Dinner (April 28)';
            if (id === 'breakfast') return 'Mission Brief: Breakfast (April 29)';
            return id;
          }).join(', ');

          const formattedMessage = `
RSA Conference 2025 Event Signup

Name: ${payload.name}
Organization: ${payload.company}
Email: ${payload.email}
Selected Events: ${eventNames}

Submitted via RSA signup page
          `.trim();

          const response = await fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              access_key: '217a97ca-0557-4364-86f7-66e28fbd499f',
              subject: `RSA 2025 Event Signup - ${payload.name} (${payload.company})`,
              from_name: payload.name,
              email: payload.email,
              replyto: payload.email,
              message: formattedMessage,
            }),
          });

          const result = await response.json();

          if (response.ok && result.success) {
            // Show success
            if (formSuccess) formSuccess.classList.remove('hidden');
            form.reset();
            formSuccess?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          } else {
            if (formError && errorMessage) {
              errorMessage.textContent = result.message || 'Transmission failed. Please try again.';
              formError.classList.remove('hidden');
            }
          }
        } catch (error) {
          if (formError && errorMessage) {
            errorMessage.textContent = 'Network error. Please check your connection and try again.';
            formError.classList.remove('hidden');
          }
        } finally {
          // Reset button
          if (submitBtn) submitBtn.disabled = false;
          if (submitText) submitText.textContent = 'Submit Access Request';
          if (submitSpinner) submitSpinner.classList.add('hidden');
          if (submitArrow) submitArrow.classList.remove('hidden');
        }
      });
    }
  </script>
</Layout>
