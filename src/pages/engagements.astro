---
import Layout from '../components/Layout.astro';
import CardGrid from '../components/CardGrid.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';
import engagements from '../data/engagements.json';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
---
<Layout 
  title="Spades Institute | Programs" 
  description="Explore our speaker series and fellowships that bring together mission leaders, technologists, and practitioners to solve national security challenges."
>
  <Breadcrumbs items={[
    { label: 'Home', href: `${base}/` },
    { label: 'Programs', href: `${base}/engagements` }
  ]} />
  <section class="bg-spades-ink text-white border-b border-white/10 relative overflow-hidden">
    <div class="absolute inset-0 opacity-30" style="background-image: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.08), transparent 55%);" aria-hidden="true"></div>
    <div class="max-w-6xl mx-auto px-6 py-16 text-center relative motion-safe:animate-fadeUp">
      <p class="text-xs uppercase tracking-[0.4em] text-white/70">Engagements</p>
      <h1 class="mt-6 font-display text-5xl md:text-6xl italic">Public/Private Programs</h1>
      <p class="mt-6 text-white/75 max-w-3xl mx-auto">
        Speaker series and fellowships that pair mission leaders, technologists, and practitioners—built for trust, clarity, and execution.
      </p>
      <div class="mt-10">
        <a
          href={`${base}/connect`}
          class="btn btn-invert"
        >
          Propose an engagement <span aria-hidden="true">→</span>
        </a>
      </div>
    </div>
  </section>

  <section class="bg-spades-ink text-white">
    <div class="max-w-6xl mx-auto px-6 py-12">
      <CardGrid items={engagements} />
    </div>
  </section>

  <!-- Veterans Fellowship Section -->
  <section class="bg-white border-t border-spades-border">
    <div class="max-w-6xl mx-auto px-6 py-16">
      {(() => {
        const veteransFellowship = engagements.find(e => e.meta.includes('Veterans Fellowship'));
        if (!veteransFellowship) return null;
        return (
          <div class="bg-spades-paper border border-spades-border rounded-xl p-8 md:p-10 shadow-card">
            <div class="text-center mb-8">
              <p class="text-xs uppercase tracking-[0.4em] text-spades-muted mb-3">Veterans Initiative</p>
              <h2 class="font-display text-3xl md:text-4xl italic text-spades-ink mb-4">{veteransFellowship.title}</h2>
              <p class="text-spades-muted max-w-2xl mx-auto">{veteransFellowship.description}</p>
            </div>
            <div class="text-center">
              <a
                href="https://operationmos.com"
                target="_blank"
                rel="noreferrer"
                class="btn btn-primary inline-flex items-center gap-2"
              >
                Get started: translate your military experience into corporate résumé
                <span aria-hidden="true">→</span>
              </a>
            </div>
          </div>
        );
      })()}
    </div>
  </section>
</Layout>
