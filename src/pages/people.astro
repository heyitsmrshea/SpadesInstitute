---
import Layout from '../components/Layout.astro';
import PeopleGrid from '../components/PeopleGrid.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';
import people from '../data/people.json';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const siteUrl = import.meta.env.PUBLIC_SITE_URL || 'https://HeyItsMrShea.github.io';

// Group people by role
const foundingPartners = people.filter(p => p.role.includes('Founding Partner'));
const advisors = people.filter(p => p.role.includes('Advisor'));
const others = people.filter(p => !p.role.includes('Founding Partner') && !p.role.includes('Advisor'));

// Build jump links based on available sections
const sections = [
  { id: 'founding-partners', label: 'Founding Partners', count: foundingPartners.length },
  { id: 'advisors', label: 'Advisors', count: advisors.length },
  { id: 'team', label: 'Team', count: others.length }
].filter(s => s.count > 0);
---
<Layout 
  title="Spades Institute | People" 
  description="Meet the leaders and advisors of Spades Institute, committed to advancing democracy, freedom, and ethics through trusted collaboration."
>
  <head slot="head">
    <link rel="canonical" href={`${siteUrl}${base}/people`} />
  </head>
  
  <!-- Breadcrumbs removed for cleaner look on small site -->

  <!-- Hero (Reduced Height) -->
  <section class="bg-spades-ink-deep py-10 md:py-12 relative overflow-hidden">
    <div class="absolute inset-0 bg-hex-pattern opacity-30" aria-hidden="true"></div>
    
    <div class="max-w-4xl mx-auto px-6 text-center relative blur-reveal">
      <p class="text-xs uppercase tracking-widest text-spades-muted-light mb-3">People</p>
      <h1 class="text-heading-xl md:text-heading-2xl text-white not-italic">Our Team</h1>
      <p class="mt-3 text-base text-dark-secondary max-w-xl mx-auto leading-relaxed">
        Leaders and advisors advancing nonpartisan, outcomes-driven collaboration.
      </p>
      
      <!-- Filter Pills with Counts -->
      <div class="mt-6 flex flex-wrap justify-center gap-2" role="group" aria-label="Filter by role">
        <button 
          type="button"
          data-filter="all"
          class="filter-pill active px-4 py-2 rounded-full border text-sm font-medium transition-all duration-200"
        >
          All <span class="opacity-70">({people.length})</span>
        </button>
        <button 
          type="button"
          data-filter="founding-partner"
          class="filter-pill px-4 py-2 rounded-full border text-sm font-medium transition-all duration-200"
        >
          Founding Partners <span class="opacity-70">({foundingPartners.length})</span>
        </button>
        <button 
          type="button"
          data-filter="advisor"
          class="filter-pill px-4 py-2 rounded-full border text-sm font-medium transition-all duration-200"
        >
          Advisors <span class="opacity-70">({advisors.length})</span>
        </button>
      </div>
    </div>
  </section>

  <!-- People Grid -->
  <section class="bg-spades-paper section-padding">
    <div class="max-w-5xl mx-auto px-6">
      <div id="people-container">
        <PeopleGrid people={people} />
      </div>
    </div>
  </section>

  <!-- Get Involved Section -->
  <section class="bg-white section-padding border-t border-spades-border">
    <div class="max-w-3xl mx-auto px-6 text-center">
      <h2 class="text-heading-lg text-spades-text mb-4 not-italic">Get Involved</h2>
      <p class="text-body-lg text-spades-text-secondary mb-8">
        Interested in advising, partnering, or collaborating with us?
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a href={`${base}/partner`} class="btn btn-primary">
          Partner with us
        </a>
        <a href={`${base}/connect`} class="btn btn-secondary">
          Get in touch
        </a>
      </div>
    </div>
  </section>
</Layout>

<style>
  .filter-pill {
    background-color: transparent;
    border-color: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.8);
    position: relative;
  }
  
  .filter-pill:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.4);
    color: white;
  }
  
  .filter-pill.active {
    background-color: white;
    border-color: white;
    color: #0f172a;
    font-weight: 600;
  }
  
  .filter-pill.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 2px;
    background-color: #1e3a5f;
    border-radius: 1px;
  }
</style>

<script>
  // Filter functionality
  const filterPills = document.querySelectorAll('.filter-pill');
  const peopleContainer = document.getElementById('people-container');
  
  filterPills.forEach(pill => {
    pill.addEventListener('click', () => {
      const filter = pill.getAttribute('data-filter');
      
      // Update active state
      filterPills.forEach(p => p.classList.remove('active'));
      pill.classList.add('active');
      
      // Filter people cards
      const cards = peopleContainer?.querySelectorAll('article');
      cards?.forEach(card => {
        const role = card.getAttribute('data-role') || '';
        const shouldShow = 
          filter === 'all' ||
          role === filter;
        
        if (shouldShow) {
          card.classList.remove('hidden');
          card.style.display = '';
        } else {
          card.classList.add('hidden');
          card.style.display = 'none';
        }
      });
    });
  });
</script>

