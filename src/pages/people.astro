---
import Layout from '../components/Layout.astro';
import PeopleGrid from '../components/PeopleGrid.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';
import people from '../data/people.json';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

// Group people by role
const foundingPartners = people.filter(p => p.role.includes('Founding Partner'));
const advisors = people.filter(p => p.role.includes('Advisor'));
const others = people.filter(p => !p.role.includes('Founding Partner') && !p.role.includes('Advisor'));

// Build jump links based on available sections
const sections = [
  { id: 'founding-partners', label: 'Founding Partners', count: foundingPartners.length },
  { id: 'advisors', label: 'Advisors', count: advisors.length },
  { id: 'team', label: 'Team', count: others.length }
].filter(s => s.count > 0);
---
<Layout 
  title="Spades Institute | People" 
  description="Meet the leaders and advisors of Spades Institute, committed to advancing democracy, freedom, and ethics through trusted collaboration."
>
  <Breadcrumbs items={[
    { label: 'Home', href: `${base}/` },
    { label: 'People', href: `${base}/people` }
  ]} />

  <!-- Hero -->
  <section class="bg-spades-ink-deep section-padding-sm">
    <div class="max-w-4xl mx-auto px-6 text-center motion-safe:animate-fadeUp">
      <p class="text-xs uppercase tracking-widest text-spades-muted-light mb-4">People</p>
      <h1 class="text-heading-xl md:text-heading-2xl text-white">Our Team</h1>
      <p class="mt-4 text-lg text-dark-secondary max-w-2xl mx-auto leading-relaxed">
        Leaders and advisors committed to advancing democracy, freedom, and ethics through trusted, nonpartisan collaboration.
      </p>
      
      <!-- Jump Links -->
      {sections.length > 1 && (
        <nav class="mt-8 flex flex-wrap justify-center gap-3" aria-label="Jump to section">
          {sections.map((section) => (
            <a 
              href={`#${section.id}`}
              class="nav-link inline-flex items-center gap-2 px-4 py-2 rounded-full border border-white/20 text-sm text-white/80 hover:bg-white/10 hover:text-white hover:border-white/40 transition-colors focus-white"
            >
              {section.label}
              <span class="text-xs text-white/60">({section.count})</span>
            </a>
          ))}
        </nav>
      )}
    </div>
  </section>

  <!-- People List -->
  <section class="bg-spades-paper section-padding">
    <div class="max-w-4xl mx-auto px-6">
      {foundingPartners.length > 0 && (
        <div id="founding-partners" class="mb-12 scroll-mt-24">
          <div class="flex items-center gap-4 mb-6">
            <h2 class="text-heading-md text-spades-text">Founding Partners</h2>
            <div class="flex-1 h-px bg-spades-border"></div>
          </div>
          <PeopleGrid people={foundingPartners} />
        </div>
      )}

      {advisors.length > 0 && (
        <div id="advisors" class="mb-12 scroll-mt-24">
          <div class="flex items-center gap-4 mb-6">
            <h2 class="text-heading-md text-spades-text">Advisors</h2>
            <div class="flex-1 h-px bg-spades-border"></div>
          </div>
          <PeopleGrid people={advisors} />
        </div>
      )}

      {others.length > 0 && (
        <div id="team" class="scroll-mt-24">
          <div class="flex items-center gap-4 mb-6">
            <h2 class="text-heading-md text-spades-text">Team</h2>
            <div class="flex-1 h-px bg-spades-border"></div>
          </div>
          <PeopleGrid people={others} />
        </div>
      )}
    </div>
  </section>

  <!-- Join Section -->
  <section class="bg-white section-padding border-t border-spades-border">
    <div class="max-w-3xl mx-auto px-6 text-center">
      <h2 class="text-heading-lg text-spades-text mb-4">Join Our Team</h2>
      <p class="text-body-lg text-spades-text-secondary mb-8">
        We're always looking for passionate leaders committed to advancing ethics, democracy, and freedom through trusted collaboration.
      </p>
      <a href={`${base}/connect`} class="btn btn-primary">
        Get in touch
      </a>
    </div>
  </section>
</Layout>

<style>
  .scroll-mt-24 {
    scroll-margin-top: 6rem;
  }
</style>
