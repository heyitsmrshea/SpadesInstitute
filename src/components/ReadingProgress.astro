---
---
<div id="reading-progress" class="fixed top-0 left-0 w-0 h-1 bg-spades-accent z-50 transition-all duration-150" aria-hidden="true"></div>

<script>
  const progressBar = document.getElementById('reading-progress');
  const article = document.querySelector('article');
  
  if (progressBar && article) {
    const updateProgress = () => {
      const articleTop = article.offsetTop;
      const articleHeight = article.offsetHeight;
      const windowHeight = window.innerHeight;
      const scrollTop = window.scrollY;
      
      const articleBottom = articleTop + articleHeight;
      const viewportBottom = scrollTop + windowHeight;
      
      if (viewportBottom > articleTop && scrollTop < articleBottom) {
        const scrolled = viewportBottom - articleTop;
        const total = articleHeight + windowHeight;
        const percentage = Math.min(100, Math.max(0, (scrolled / total) * 100));
        progressBar.style.width = `${percentage}%`;
      } else if (scrollTop >= articleBottom) {
        progressBar.style.width = '100%';
      } else {
        progressBar.style.width = '0%';
      }
    };
    
    window.addEventListener('scroll', updateProgress, { passive: true });
    updateProgress();
  }
</script>
