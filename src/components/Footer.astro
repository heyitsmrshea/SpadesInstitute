---
import LinkedInIcon from './icons/LinkedInIcon.astro';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const currentYear = new Date().getFullYear();

const quickLinks = [
  { label: 'About', href: `${base}/about/` },
  { label: 'Programs', href: `${base}/engagements/` },
  { label: 'People', href: `${base}/people/` },
];

const resourceLinks = [
  { label: 'Blog', href: `${base}/blog/` },
  { label: 'Partner', href: `${base}/connect/` },
  { label: 'Ethics Letter', href: `${base}/ethics-letter/` }
];
---
<footer class="bg-spades-ink-deep text-white">
  <div class="max-w-5xl mx-auto footer-container py-10 md:py-12">
    
    <!-- Mobile Layout: Stacked, compact -->
    <div class="footer-grid">
      
      <!-- Brand Section -->
      <div class="footer-brand">
        <a href={`${base}/`} class="nav-link inline-block mb-3 group" aria-label="Spades Institute Home">
          <img 
            src={`${base}/logo-light-transparent.png`} 
            alt="Spades Institute" 
            class="h-12 md:h-16 lg:h-20 w-auto opacity-90 group-hover:opacity-100 transition-opacity" 
          />
        </a>
        <p class="text-sm text-white/70 max-w-xs leading-relaxed">
          Connecting government, industry, and academia to solve national security priorities.
        </p>
        <div class="mt-3 text-xs text-white/50">
          <p>501(c)(3) nonprofit · EIN 99-2763425</p>
          <p>Washington DC</p>
        </div>
      </div>

      <!-- Links Grid - 2 columns on mobile -->
      <div class="footer-links-grid">
        <!-- Quick Links -->
        <div>
          <p class="text-xs font-semibold text-white/50 uppercase tracking-wider mb-3">Navigate</p>
          <nav class="space-y-2" aria-label="Quick links">
            {quickLinks.map((link) => (
              <a 
                href={link.href} 
                class="nav-link block text-sm text-white/80 hover:text-white transition-colors py-1"
              >
                {link.label}
              </a>
            ))}
          </nav>
        </div>

        <!-- Resource Links -->
        <div>
          <p class="text-xs font-semibold text-white/50 uppercase tracking-wider mb-3">Resources</p>
          <nav class="space-y-2" aria-label="Resource links">
            {resourceLinks.map((link) => (
              <a 
                href={link.href} 
                class="nav-link block text-sm text-white/80 hover:text-white transition-colors py-1"
              >
                {link.label}
              </a>
            ))}
          </nav>
        </div>
      </div>

      <!-- Contact Section -->
      <div class="footer-contact">
        <p class="text-xs font-semibold text-white/50 uppercase tracking-wider mb-3">Connect</p>
        <div class="flex flex-wrap gap-3">
          <a 
            href="mailto:info@spadesinstitute.org" 
            class="nav-link inline-flex items-center gap-1.5 text-sm text-white/80 hover:text-white transition-colors py-1"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            Email
          </a>
          <a 
            href="https://www.linkedin.com/company/spades-institute" 
            target="_blank" 
            rel="noreferrer" 
            class="nav-link inline-flex items-center gap-1.5 text-sm text-white/80 hover:text-white transition-colors py-1"
            aria-label="Spades Institute on LinkedIn"
          >
            <LinkedInIcon class="w-4 h-4" />
            LinkedIn
          </a>
          <a 
            href="https://givebutter.com/spades-institute" 
            target="_blank" 
            rel="noreferrer" 
            class="nav-link inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white/10 text-sm text-white hover:bg-white/20 transition-colors font-medium"
          >
            Donate
            <span aria-hidden="true">→</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <p class="text-xs text-white/50">© {currentYear} Spades Institute. All rights reserved.</p>
      <p class="text-xs text-white/40">Democracy · Freedom · Ethics</p>
    </div>
  </div>
</footer>

<style>
  .footer-container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 640px) {
    .footer-container {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  /* Mobile: Stacked layout */
  .footer-grid {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .footer-links-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  .footer-contact {
    padding-top: 0.5rem;
  }

  .footer-bottom {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    text-align: center;
  }

  /* Tablet: 2-column layout */
  @media (min-width: 640px) {
    .footer-grid {
      display: grid;
      grid-template-columns: 1.5fr 1fr 1fr;
      gap: 2rem;
      align-items: start;
    }

    .footer-links-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .footer-bottom {
      flex-direction: row;
      justify-content: space-between;
      text-align: left;
    }
  }

  /* Desktop: Full layout */
  @media (min-width: 768px) {
    .footer-grid {
      grid-template-columns: 2fr 1fr 1fr 1.5fr;
      gap: 3rem;
    }

    .footer-contact {
      text-align: left;
    }
  }

  /* Touch-friendly link sizes */
  .footer-grid a {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
  }

  /* Footer nav links should be block elements to stack properly */
  .footer-grid nav a {
    display: block;
    min-height: 40px;
    padding: 0.5rem 0;
  }
</style>
