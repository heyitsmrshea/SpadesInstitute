---
import LinkedInIcon from './icons/LinkedInIcon.astro';
const { people = [] } = Astro.props;
const baseRaw = import.meta.env.BASE_URL || '/';
const base = baseRaw.endsWith('/') ? baseRaw.slice(0, -1) : baseRaw;

// Separate people by role
const foundingPartners = people.filter(p => p.role.includes('Founding Partner'));
const advisors = people.filter(p => p.role.includes('Advisor'));

// Determine if we should use 2-column or 3-column grid
// Use 2-column until we have 6+ people
const useTwoColumn = people.length < 6;
---
<div class="space-y-16">
  <!-- Founding Partners Section -->
  {foundingPartners.length > 0 && (
    <section>
      <h2 class="text-xs uppercase tracking-[0.2em] text-spades-muted font-bold mb-8 px-1">
        Founding Partners
      </h2>
      <div class={`grid grid-cols-1 sm:grid-cols-2 ${useTwoColumn ? '' : 'lg:grid-cols-3'} gap-x-8 gap-y-12`}>
        {foundingPartners.map((person, i) => {
          const cardId = `person-${person.name.toLowerCase().replace(/\s+/g, '-')}`;
          
          return (
            <article
              class="group flex flex-col gap-4 cursor-pointer"
              style={`animation-delay: ${i * 100}ms`}
              id={cardId}
              data-role="founding-partner"
            >
              <!-- Photo Frame - Clean, with slim glow on hover -->
              <div class="relative w-full aspect-[4/3] rounded-lg overflow-hidden transition-all duration-300 ring-1 ring-black/5 group-hover:ring-spades-accent group-hover:shadow-[0_0_20px_rgba(30,58,95,0.15)]">
                
                {person.linkedin ? (
                  <a href={person.linkedin} target="_blank" rel="noreferrer" class="block w-full h-full">
                    <img
                      src={`${base}${person.headshot.startsWith('/') ? person.headshot : '/' + person.headshot}`}
                      alt={`${person.name} headshot`}
                      loading="lazy"
                      decoding="async"
                      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                      style="filter: saturate(1.05);" 
                    />
                    
                     <!-- Role Badge (Floating) -->
                    <div class="absolute top-3 left-3 bg-white/90 backdrop-blur-md px-2 py-1 rounded text-[10px] font-bold text-spades-ink tracking-wider shadow-sm uppercase pointer-events-none border border-white/20">
                      {person.role}
                    </div>

                    <!-- LinkedIn Overlay -->
                    <div class="absolute inset-0 bg-spades-accent/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                       <div class="bg-white/95 backdrop-blur rounded-full px-3 py-1.5 flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300 shadow-lg">
                          <LinkedInIcon class="w-3.5 h-3.5 text-[#0077b5]" />
                          <span class="text-xs font-semibold text-spades-text">View Profile</span>
                       </div>
                    </div>
                  </a>
                ) : (
                  <div class="w-full h-full bg-stone-100 flex items-center justify-center">
                     <span class="text-spades-muted">No Image</span>
                  </div>
                )}
              </div>

              <!-- Content - Clean text below -->
              <div class="px-1">
                <h3 class="text-xl font-bold text-spades-text mb-1 group-hover:text-spades-accent transition-colors">{person.name}</h3>
                
                {person.tagline && (
                  <p class="text-sm text-spades-text-secondary leading-relaxed font-medium">
                    {person.tagline}
                  </p>
                )}
              </div>
            </article>
          );
        })}
      </div>
    </section>
  )}

  <!-- Advisors Section -->
  {advisors.length > 0 && (
    <section>
      <h2 class="text-xs uppercase tracking-[0.2em] text-spades-muted font-bold mb-8 px-1">
        Advisors
      </h2>
      <div class={`grid grid-cols-1 sm:grid-cols-2 ${useTwoColumn ? '' : 'lg:grid-cols-3'} gap-x-8 gap-y-12`}>
        {advisors.map((person, i) => {
          const cardId = `person-${person.name.toLowerCase().replace(/\s+/g, '-')}`;
          
          return (
            <article
              class="group flex flex-col gap-4 cursor-pointer"
              style={`animation-delay: ${i * 100}ms`}
              id={cardId}
              data-role="advisor"
            >
              <!-- Photo Frame -->
              <div class="relative w-full aspect-[4/3] rounded-lg overflow-hidden transition-all duration-300 ring-1 ring-black/5 group-hover:ring-spades-accent group-hover:shadow-[0_0_20px_rgba(30,58,95,0.15)]">
                
                {person.linkedin ? (
                  <a href={person.linkedin} target="_blank" rel="noreferrer" class="block w-full h-full">
                    <img
                      src={`${base}${person.headshot.startsWith('/') ? person.headshot : '/' + person.headshot}`}
                      alt={`${person.name} headshot`}
                      loading="lazy"
                      decoding="async"
                      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                      style="filter: saturate(1.05);" 
                    />
                    
                    <!-- Role Badge (Dynamic) -->
                    <div class="absolute top-3 left-3 bg-white/90 backdrop-blur-md px-2 py-1 rounded text-[10px] font-bold text-spades-ink tracking-wider shadow-sm uppercase pointer-events-none border border-white/20">
                      {person.role}
                    </div>

                    <!-- LinkedIn Overlay -->
                    <div class="absolute inset-0 bg-spades-accent/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                       <div class="bg-white/95 backdrop-blur rounded-full px-3 py-1.5 flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300 shadow-lg">
                          <LinkedInIcon class="w-3.5 h-3.5 text-[#0077b5]" />
                          <span class="text-xs font-semibold text-spades-text">View Profile</span>
                       </div>
                    </div>
                  </a>
                ) : (
                   <div class="w-full h-full bg-stone-100 flex items-center justify-center">
                     <span class="text-spades-muted">No Image</span>
                  </div>
                )}
              </div>

              <!-- Content -->
              <div class="px-1">
                <h3 class="text-xl font-bold text-spades-text mb-1 group-hover:text-spades-accent transition-colors">{person.name}</h3>
                
                {person.tagline && (
                  <p class="text-sm text-spades-text-secondary leading-relaxed font-medium">
                    {person.tagline}
                  </p>
                )}
              </div>
            </article>
          );
        })}
      </div>
    </section>
  )}
</div>
