---
const {
  eyebrow = 'DEMOCRACY | FREEDOM | ETHICS',
  title,
  description,
  primaryCta = { href: 'https://givebutter.com/spadesinstitute', label: 'Donate' },
  secondaryCta,
  tertiaryCta,
  showMission = false
} = Astro.props;
// Ensure base URL ends with a slash
const baseRaw = import.meta.env.BASE_URL || '/';
const base = baseRaw.endsWith('/') ? baseRaw : `${baseRaw}/`;

const missionStatements = [
  'Spades Institute was formed and built to empower individuals, organizations and communities to instill a lasting dedication to democracy, freedom, and ethics.',
  'We are a community committed to advancing ethics, democracy, and freedom through trusted, nonpartisan engagement across the public and private sectors. We are dedicated to forging strong partnerships to build resilience within our national security frameworks.',
  'We focus on convening the right voices, fostering collaboration across sectors, and delivering practical outcomes that strengthen the security and resilience of the United States.'
];
---
<section class="relative overflow-hidden pb-16">
  <div class="absolute inset-0 bg-gradient-to-b from-white via-spades-paper to-spades-wash" aria-hidden="true"></div>
  <div class="absolute inset-0 opacity-[0.04]" style="background-image: radial-gradient(circle at 1px 1px, rgba(17,24,39,1) 1px, transparent 0); background-size: 28px 28px;" aria-hidden="true"></div>
  <div class="absolute inset-0" style="background: radial-gradient(circle at center, rgba(0,0,0,0.02), rgba(0,0,0,0.08));" aria-hidden="true"></div>
  <div class="max-w-6xl mx-auto px-6 pt-14 pb-14 relative text-center">
    <div class="mx-auto max-w-4xl motion-safe:animate-fadeUp">
      <div class="mb-6 flex justify-center">
        <img
          src={`${base}flag-us.svg`}
          alt="United States flag"
          width="96"
          height="50"
          loading="eager"
          class="h-12 w-auto rounded-sm border border-spades-border flag-real motion-safe:animate-flagWave"
        />
      </div>
      <p class="text-xs tracking-[0.34em] uppercase text-spades-muted mb-4 motion-safe:animate-fadeIn" style="animation-delay: 100ms">{eyebrow}</p>
      <h1 class="font-display text-4xl md:text-5xl lg:text-6xl leading-tight text-spades-ink motion-safe:animate-fadeUp" style="animation-delay: 200ms">{title}</h1>
      <p class="mt-5 text-lg text-spades-muted motion-safe:animate-fadeIn" style="animation-delay: 400ms">{description}</p>
      {Astro.props.proof && (
        <p class="mt-3 text-xs uppercase tracking-[0.28em] text-spades-muted">{Astro.props.proof}</p>
      )}
      {showMission && (
        <div class="mt-12 max-w-4xl mx-auto">
          <div class="grid md:grid-cols-3 gap-6 text-left">
            {missionStatements.map((mission, i) => (
              <div class="motion-safe:animate-fadeIn" style={`animation-delay: ${500 + i * 100}ms`}>
                <p class="flex gap-3 text-sm text-spades-muted leading-relaxed">
                  <span aria-hidden="true" class="text-spades-ink/50 mt-1 flex-shrink-0">♠︎</span>
                  <span>{mission}</span>
                </p>
              </div>
            ))}
          </div>
        </div>
      )}
      <p class="mt-8 text-spades-ink/70 motion-safe:animate-bounceIn" style="animation-delay: 800ms" aria-hidden="true">♠︎</p>
      <div class="mt-5 flex flex-wrap gap-4 justify-center motion-safe:animate-fadeUp" style="animation-delay: 900ms">
        <a
          href={primaryCta.href}
          target={primaryCta.href.startsWith('http') ? '_blank' : undefined}
          rel={primaryCta.href.startsWith('http') ? 'noreferrer' : undefined}
          class="btn btn-primary"
        >
          {primaryCta.label}
        </a>
        {secondaryCta && (
          <a
            href={secondaryCta.href}
            target={secondaryCta.href.startsWith('http') ? '_blank' : undefined}
            rel={secondaryCta.href.startsWith('http') ? 'noreferrer' : undefined}
            class="btn btn-outline"
          >
            {secondaryCta.label}
          </a>
        )}
      </div>
      {tertiaryCta && (
        <div class="mt-3">
          <a 
            href={tertiaryCta.href} 
            target={tertiaryCta.href.startsWith('http') ? '_blank' : undefined}
            rel={tertiaryCta.href.startsWith('http') ? 'noreferrer' : undefined}
            class="text-xs uppercase tracking-[0.24em] text-spades-muted hover:text-spades-ink"
          >
            {tertiaryCta.label} →
          </a>
        </div>
      )}
    </div>
  </div>
</section>
