---
const navLinks = [
  { label: 'Home', href: '/' },
  { label: 'About Us', href: '/about' },
  { label: 'Programs', href: '/engagements' },
  { label: 'People', href: '/people' },
  { label: 'Partner', href: '/connect' }
];

const pathname = Astro.url.pathname.replace(/\/$/, '') || '/';
const isActive = (href) => (href === '/' ? pathname === '/' : pathname === href);
---
<header class="w-full bg-spades-ink sticky top-0 z-40">
  <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between gap-6">
    <a class="font-display text-2xl tracking-wide text-spades-paper flex items-center gap-3" href="/">
      <span aria-hidden="true" class="text-3xl leading-none">♠︎</span>
      <span>Spades Institute</span>
    </a>

    <nav class="hidden md:flex items-center gap-8 text-sm text-spades-paper/80">
      {navLinks.map((link) => (
        <a
          class:list={[
            'transition-colors hover:text-spades-paper focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:ring-offset-2 focus-visible:ring-offset-spades-ink',
            isActive(link.href) ? 'text-spades-paper underline underline-offset-6 decoration-white/40' : ''
          ]}
          href={link.href}
          aria-current={isActive(link.href) ? 'page' : undefined}
        >
          {link.label}
        </a>
      ))}
    </nav>

    <div class="flex items-center gap-3">
      <a
        class="btn btn-invert-outline px-5 py-2.5"
        href="https://givebutter.com/spadesinstitute"
        target="_blank"
        rel="noreferrer"
      >
        Donate
      </a>

      <details class="md:hidden relative">
        <summary class="list-none cursor-pointer select-none p-2 rounded-md hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50">
          <span class="sr-only">Open menu</span>
          <span class="block w-5 h-[2px] bg-white mb-1"></span>
          <span class="block w-4 h-[2px] bg-white mb-1"></span>
          <span class="block w-6 h-[2px] bg-white"></span>
        </summary>
        <div class="absolute right-0 mt-3 w-56 rounded-xl border border-white/10 bg-spades-ink shadow-card p-2">
          {navLinks.map((link) => (
            <a
              class:list={[
                'block px-3 py-2 rounded-lg text-sm text-white/85 hover:bg-white/10 hover:text-white transition',
                isActive(link.href) ? 'bg-white/10 text-white' : ''
              ]}
              href={link.href}
              aria-current={isActive(link.href) ? 'page' : undefined}
            >
              {link.label}
            </a>
          ))}
        </div>
      </details>
    </div>
  </div>
</header>
