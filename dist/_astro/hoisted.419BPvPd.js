import"./hoisted.Dp3RlRfs.js";document.querySelectorAll(".download-ics").forEach(o=>{o.addEventListener("click",()=>{const i=o.getAttribute("data-ics-content"),r=o.getAttribute("data-event-id");if(i){const e=new Blob([i],{type:"text/calendar;charset=utf-8"}),p=URL.createObjectURL(e),s=document.createElement("a");s.href=p,s.download=`spades-rsa-${r}.ics`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(p)}})});const d=document.getElementById("rsaSignupForm"),m=document.getElementById("submit-btn"),l=document.getElementById("submit-text"),f=document.getElementById("submit-spinner"),u=document.getElementById("submit-arrow"),c=document.getElementById("form-success"),t=document.getElementById("form-error"),n=document.getElementById("error-message");d&&d.addEventListener("submit",async o=>{o.preventDefault(),c&&c.classList.add("hidden"),t&&t.classList.add("hidden");const i=new FormData(d),r=i.getAll("events"),e={name:String(i.get("name")||""),company:String(i.get("company")||""),email:String(i.get("email")||""),events:r};if(!e.name||!e.company||!e.email){t&&n&&(n.textContent="✗ Please fill in all required fields.",t.classList.remove("hidden"));return}if(r.length===0){t&&n&&(n.textContent="✗ Please select at least one operation.",t.classList.remove("hidden"));return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)){t&&n&&(n.textContent="✗ Please enter a valid email address.",t.classList.remove("hidden"));return}m&&(m.disabled=!0),l&&(l.textContent="Transmitting..."),f&&f.classList.remove("hidden"),u&&u.classList.add("hidden");try{const s=r.map(a=>a==="dinner"?"Mission Brief: Dinner (April 28)":a==="breakfast"?"Mission Brief: Breakfast (April 29)":a).join(", "),y=`RSA Conference 2025 Event Signup

Name: ${e.name}
Organization: ${e.company}
Email: ${e.email}
Selected Events: ${s}

Submitted via RSA signup page`,g=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"217a97ca-0557-4364-86f7-66e28fbd499f",subject:`RSA 2025 Event Signup - ${e.name} (${e.company})`,from_name:e.name,email:e.email,replyto:e.email,message:y})}),b=await g.json();if(g.ok&&b.success){const a=document.getElementById("approvalStamp");a&&(a.classList.add("show"),setTimeout(()=>{a.classList.remove("show")},2e3)),c&&c.classList.remove("hidden"),d.reset(),c?.scrollIntoView({behavior:"smooth",block:"nearest"})}else t&&n&&(n.textContent=b.message||"✗ Transmission failed. Please try again.",t.classList.remove("hidden"))}catch{t&&n&&(n.textContent="✗ Network error. Please check your connection.",t.classList.remove("hidden"))}finally{m&&(m.disabled=!1),l&&(l.textContent="Submit Clearance Request"),f&&f.classList.add("hidden"),u&&u.classList.remove("hidden")}});
