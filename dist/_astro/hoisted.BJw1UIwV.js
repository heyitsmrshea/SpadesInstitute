import"./hoisted.Dp3RlRfs.js";const r=document.getElementById("contactForm"),m=document.getElementById("submit-btn"),l=document.getElementById("submit-text"),f=document.getElementById("submit-spinner"),d=document.getElementById("form-success"),a=document.getElementById("form-error"),n=document.getElementById("error-message"),c=document.getElementById("message-textarea"),s=document.getElementById("char-count"),i=document.getElementById("message-error");c&&s&&c.addEventListener("input",()=>{const e=c.value.length;s.textContent=`(${e} / 2000 characters)`,e>1800?(s.classList.add("text-orange-600"),s.classList.remove("text-spades-muted")):(s.classList.remove("text-orange-600"),s.classList.add("text-spades-muted"))});const b=r?.querySelectorAll("input, textarea, select");b?.forEach(e=>{e.addEventListener("blur",()=>{(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&(e.hasAttribute("required")&&!e.value.trim()?(e.classList.add("border-red-300"),e.classList.remove("border-spades-border")):(e.classList.remove("border-red-300"),e.classList.add("border-spades-border")))}),e.addEventListener("input",()=>{(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&e.value.trim()&&(e.classList.remove("border-red-300"),e.classList.add("border-spades-border"))})});r&&r.addEventListener("submit",async e=>{e.preventDefault(),d&&d.classList.add("hidden"),a&&a.classList.add("hidden");const o=new FormData(r),t={name:String(o.get("name")||""),email:String(o.get("email")||""),org:String(o.get("org")||""),topic:String(o.get("topic")||""),message:String(o.get("message")||"")};if(!t.name||!t.email||!t.topic||!t.message){a&&n&&(n.textContent="Please fill in all required fields.",a.classList.remove("hidden")),t.name||r.querySelector('[name="name"]')?.classList.add("border-red-300"),t.email||r.querySelector('[name="email"]')?.classList.add("border-red-300"),t.topic||r.querySelector('[name="topic"]')?.classList.add("border-red-300"),t.message||(c?.classList.add("border-red-300"),i&&(i.textContent="Message is required.",i.classList.remove("hidden")));return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){a&&n&&(n.textContent="Please enter a valid email address.",a.classList.remove("hidden")),r.querySelector('[name="email"]')?.classList.add("border-red-300");return}if(t.message.length<10){i&&(i.textContent="Message must be at least 10 characters.",i.classList.remove("hidden")),c?.classList.add("border-red-300");return}m&&(m.disabled=!0),l&&(l.textContent="Sending..."),f&&f.classList.remove("hidden");try{const g=`
Name: ${t.name}
Email: ${t.email}
Organization: ${t.org||"Not provided"}
Topic: ${t.topic}

Message:
${t.message}
          `.trim(),u=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"217a97ca-0557-4364-86f7-66e28fbd499f",subject:`Spades Institute Contact Form - ${t.topic}`,from_name:t.name,email:t.email,replyto:t.email,message:g})}),L=await u.json();u.ok&&L.success?(d&&d.classList.remove("hidden"),r.reset(),s&&(s.textContent="(0 characters)"),s&&(s.classList.remove("text-orange-600"),s.classList.add("text-spades-muted")),d?.scrollIntoView({behavior:"smooth",block:"nearest"})):a&&n&&(n.textContent=L.message||"Failed to send message. Please try again or email us directly.",a.classList.remove("hidden"))}catch{a&&n&&(n.textContent="Network error. Please check your connection and try again, or email us directly at info@spadesinstitute.org",a.classList.remove("hidden"))}finally{m&&(m.disabled=!1),l&&(l.textContent="Send message"),f&&f.classList.add("hidden")}});
